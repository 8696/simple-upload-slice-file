!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("SimpleUploadSliceFile",[],t):"object"==typeof exports?exports.SimpleUploadSliceFile=t():e.SimpleUploadSliceFile=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"makeRandom",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length,r="",n=0;n<20;n++)r+=e.charAt(Math.floor(Math.random()*t));return r+(new Date).getTime()}},{key:"getFileNameSuffix",value:function(e){return e.split(".").pop()}},{key:"queryStringToObj",value:function(e){for(var t=/([^=&\s]+)[=\s]*([^&\s]*)/g,r={};t.exec(e);)r[RegExp.$1]=RegExp.$2;return r}},{key:"deepClone",value:function(t,r){for(var i in t)t.hasOwnProperty(i)&&("object"===n(t[i])&&"[object Null]"!==Object.prototype.toString.call(t[i])?(r[i]="[object Array]"===Object.prototype.toString.call(t[i])?[]:{},e.deepClone(t[i],r[i])):r[i]=t[i]);return r}}]),e}();t.default=a},function(e,t,r){"use strict";r(2);var n,i=r(3),a=(n=i)&&n.__esModule?n:{default:n};e.exports=a.default},function(e,t,r){"use strict";"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},writable:!0,configurable:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=l(r(4)),a=l(r(0)),s=l(r(5)),o=l(r(7));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chunkSile=t.chunkSile||10,this.url=t.url||"http://127.0.0.1",this.formData={},this.formSleceFile=[],this.headers={},this.callBack=t.callBack||{},this.sliceTryFreq=t.sliceTryFreq||10,this.isSendCheckMd5=t.isSendCheckMd5||!1,this.delay=t.delay||0}return n(e,[{key:"appendHeader",value:function(e){return Object.assign(this.headers,e),this}},{key:"appendData",value:function(e){return Object.assign(this.formData,e),this}},{key:"appendFile",value:function(e){for(var t in e){var r=null;if(!e[t])throw new Error("No correct file was selected");1===e[t].nodeType?r=e[t].files[0]:"undefined"!=typeof jQuery&&e[t]instanceof jQuery?r=e[t][0].files[0]:e[t]instanceof FileList?r=e[t][0]:e[t]instanceof File&&(r=e[t]);var n=new i.default({chunkSile:this.chunkSile,file:r});this.formSleceFile[t]={totalSize:r.size,fileName:r.name,fileKey:a.default.makeRandom(),slices:n.getSlice(),primordial:r}}return this}},{key:"send",value:function(){var e=this,t=Object.keys(this.formSleceFile),r={},n={},i=[],l=function(l){var u=e.formSleceFile[l],f=0,c=0;r[l]={totalSize:u.totalSize,fileName:u.fileName,fileKey:u.fileKey,chunkLength:u.slices.length,loadedTotalSize:0},n[l]={field:l,fileKey:u.fileKey,fileName:u.fileName,md5:null},e.isSendCheckMd5&&(0,o.default)({file:u.primordial,success:function(t){n[l].md5=t.md5;var r=!0;for(var i in n)n[i].md5||(r=!1);if(r){e.callBack.getFileMd5&&e.callBack.getFileMd5(n);var o=[];for(var u in n)o.push({"upload-file-id":n[u].fileKey,md5:n[u].md5,suffix:a.default.getFileNameSuffix(n[u].fileName)});new s.default({callBack:{checkMd5Result:function(t){e.callBack.checkMd5Result&&e.callBack.checkMd5Result(t)}},sliceTryFreq:e.sliceTryFreq,url:e.url,isCheckMd5Request:!0,headers:{"upload-file-md5":JSON.stringify(o)},formData:{"upload-file-md5":JSON.stringify(o)}}).send()}},progress:function(e){},complete:function(e){},error:function(e){}});for(var h=0;h<u.slices.length;h++)e.headers=Object.assign(e.headers,{"upload-size-range":u.slices[h].start+"-"+u.slices[h].end,"upload-total-size":u.totalSize,"upload-total-slice":u.slices.length,"upload-now-order":h+1,"upload-file-id":u.fileKey}),new s.default({callBack:{progress:function(t){0===f?f=t[l]:f+=t[l]-c,r[l].loadedTotalSize=f,e.callBack.progress&&e.callBack.progress(a.default.deepClone(r,{})),c=t[l]},singleSuccess:function(r){try{e.callBack.singleSuccess&&e.callBack.singleSuccess({field:r.field,response:"string"==typeof r.response?JSON.parse(r.response):r.response}),i.push({field:r.field,response:"string"==typeof r.response?JSON.parse(r.response):r.response});for(var n=0;n<t.length;n++)if(l===t[n]){t.splice(n,1);break}0===t.length&&e.callBack.allSuccess&&e.callBack.allSuccess(i)}catch(e){throw new Error(e.toString())}},sliceSuccess:function(){c=0},error:function(e){console.log(e)},tryFreqError:function(t){e.callBack.tryFreqError&&e.callBack.tryFreqError(t)}},url:e.url,sliceTryFreq:e.sliceTryFreq,headers:e.headers,formData:e.formData,fileData:{fieldName:l,fileName:u.fileName,fileKey:u.fileKey,file:u.slices[h],order:h},delay:e.delay}).send()};for(var u in this.formSleceFile)l(u)}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=t.file,this.totalSize=this.file.size,this.chunkSile=1024*t.chunkSile*1024,this.chunkLength=0,this.slices=[],this.start=0,this.end=0,this._compute()}return n(e,[{key:"_compute",value:function(){this.totalSize<=this.chunkSile?this.chunkLength=1:this.chunkLength=Math.ceil(this.totalSize/this.chunkSile)}},{key:"getSlice",value:function(){if(0!==this.slices.length)return this.slices;for(var e=1;e<=this.chunkLength;e++){e===this.chunkLength||1===this.chunkLength?this.end=this.totalSize:this.end=e*this.chunkSile;var t=this.file.slice(this.start,this.end);this.slices.push({blob:t,order:e,start:this.start,end:this.end}),this.start=this.end}return this.slices}},{key:"getSize",value:function(){return this.totalSize}},{key:"getChunkLength",value:function(){return this.chunkLength}}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(r(6)),a=s(r(0));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t.url,this.formData=a.default.deepClone(t.formData,{}),this.headers=a.default.deepClone(t.headers||{},{}),this.fileData=t.fileData||{},this.callBack=t.callBack||{},this.sliceTryFreq=t.sliceTryFreq,this.isCheckMd5Request=t.isCheckMd5Request||!1,this.delay=t.delay}return n(e,[{key:"send",value:function(){var e=this,t=null;this.fileData.fieldName&&(t=this.fileData.fieldName),i.default.queue.push({delay:this.delay,fieldName:this.fileData.fieldName,order:this.fileData.order||"",trySend:0,maxTrySend:this.sliceTryFreq,isCheckMd5Request:this.isCheckMd5Request,cancelSend:function(t){t?e.callBack.checkMd5Result&&e.callBack.checkMd5Result({httpStatus:i.default.lastHttpStatus,response:null}):(i.default.removeField(e.fileData.fieldName),e.callBack.tryFreqError&&e.callBack.tryFreqError({httpStatus:i.default.lastHttpStatus,fieldName:e.fileData.fieldName,order:e.fileData.order}))},fn:function(){var r=new FormData,n=new XMLHttpRequest,s=e.url;for(var o in s=/\?/.test(s)?s+"&upload-random="+a.default.makeRandom():s+"?upload-random="+a.default.makeRandom(),n.open("post",s,!0),e.formData)r.append(o,e.formData[o]);for(var l in e.headers)n.setRequestHeader(l,e.headers[l]);t&&r.append(e.fileData.fieldName,e.fileData.file.blob,e.fileData.fileName),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){i.default.sendSuccess(),e.callBack.singleSuccess&&e.callBack.singleSuccess({field:e.fileData.fieldName,status:n.status,response:n.responseText});try{e.isCheckMd5Request&&e.callBack.checkMd5Result&&e.callBack.checkMd5Result({httpStatus:i.default.lastHttpStatus,response:"string"==typeof n.responseText?JSON.parse(n.responseText):n.responseText})}catch(e){throw new Error(e.toString())}}4===n.readyState&&206===n.status&&(i.default.sendSuccess(),e.callBack.sliceSuccess&&e.callBack.sliceSuccess({status:n.status,response:n.responseText})),4===n.readyState&&(i.default.lastHttpStatus=n.status,i.default.isSendLoading=!1,i.default.send())},n.upload.onprogress=function(r){var n,i,a;r.lengthComputable&&e.callBack.progress&&e.callBack.progress((n={},i=t,a=r.loaded,i in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,n))},n.send(r)}}),i.default.send()}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isSendLoading:!1,queue:[],lastHttpStatus:0,send:function(){var e=this;this.isSendLoading||this.queue.length>0&&(this.isSendLoading=!0,setTimeout(function(){e.queue[0].trySend++,e.queue[0].trySend<=e.queue[0].maxTrySend?e.queue[0].fn():(console.log(e.queue[0].isCheckMd5Request),e.queue[0].cancelSend(e.queue[0].isCheckMd5Request))},this.queue[0].delay))},sendSuccess:function(){this.queue.splice(0,1)},removeField:function(e){this.queue=this.queue.filter(function(t){return t.fieldName!==e}),this.isSendLoading=!1,this.send()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(e,t){var r=e[0],n=e[1],i=e[2],a=e[3];n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&i)+t[1]-389564586|0)<<12|a>>>20)+r|0)&r|~a&n)+t[2]+606105819|0)<<17|i>>>15)+a|0)&a|~i&r)+t[3]-1044525330|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&i)+t[5]+1200080426|0)<<12|a>>>20)+r|0)&r|~a&n)+t[6]-1473231341|0)<<17|i>>>15)+a|0)&a|~i&r)+t[7]-45705983|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&i)+t[9]-1958414417|0)<<12|a>>>20)+r|0)&r|~a&n)+t[10]-42063|0)<<17|i>>>15)+a|0)&a|~i&r)+t[11]-1990404162|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&i|~n&a)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&i)+t[13]-40341101|0)<<12|a>>>20)+r|0)&r|~a&n)+t[14]-1502002290|0)<<17|i>>>15)+a|0)&a|~i&r)+t[15]+1236535329|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[1]-165796510|0)<<5|r>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0)<<9|a>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|i>>>18)+a|0)&r|a&~r)+t[0]-373897302|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[5]-701558691|0)<<5|r>>>27)+n|0)&i|n&~i)+t[10]+38016083|0)<<9|a>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|i>>>18)+a|0)&r|a&~r)+t[4]-405537848|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[9]+568446438|0)<<5|r>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0)<<9|a>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|i>>>18)+a|0)&r|a&~r)+t[8]+1163531501|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n&a|i&~a)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&i|n&~i)+t[2]-51403784|0)<<9|a>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|i>>>18)+a|0)&r|a&~r)+t[12]-1926607734|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^i)+t[8]-2022574463|0)<<11|a>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|i>>>16)+a|0)^a^r)+t[14]-35309556|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^i)+t[4]+1272893353|0)<<11|a>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|i>>>16)+a|0)^a^r)+t[10]-1094730640|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^i)+t[0]-358537222|0)<<11|a>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|i>>>16)+a|0)^a^r)+t[6]+76029189|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((a=((a+=((r=((r+=(n^i^a)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^i)+t[12]-421815835|0)<<11|a>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|i>>>16)+a|0)^a^r)+t[2]-995338651|0)<<23|n>>>9)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~i))+t[7]+1126891415|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[14]-1416354905|0)<<15|i>>>17)+a|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~i))+t[3]-1894986606|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[10]-1051523|0)<<15|i>>>17)+a|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~i))+t[15]-30611744|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[6]-1560198380|0)<<15|i>>>17)+a|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+i|0,n=((n+=((a=((a+=(n^((r=((r+=(i^(n|~a))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~i))+t[11]-1120210379|0)<<10|a>>>22)+r|0)^((i=((i+=(r^(a|~n))+t[2]+718787259|0)<<15|i>>>17)+a|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=a+e[3]|0}function a(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function s(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function o(e){var t,r,n,s,o,l,u=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)i(f,a(e.substring(t-64,t)));for(r=(e=e.substring(t-64)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(i(f,n),t=0;t<16;t+=1)n[t]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),l=parseInt(s[1],16)||0,n[14]=o,n[15]=l,i(f,n),f}function l(e){var t,r="";for(t=0;t<4;t+=1)r+=n[e>>8*t+4&15]+n[e>>8*t&15];return r}function u(e){var t;for(t=0;t<e.length;t+=1)e[t]=l(e[t]);return e.join("")}function f(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function h(){this.reset()}u(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,r){var n,i,a,s,o=this.byteLength,l=e(t,o),u=o;return void 0!==r&&(u=e(r,o)),l>u?new ArrayBuffer(0):(n=u-l,i=new ArrayBuffer(n),a=new Uint8Array(i),s=new Uint8Array(this,l,n),a.set(s),i)}}(),h.prototype.append=function(e){return this.appendBinary(f(e)),this},h.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,r=this._buff.length;for(t=64;t<=r;t+=64)i(this._hash,a(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},h.prototype.end=function(e){var t,r,n=this._buff,i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(a,i),r=u(this._hash),e&&(r=c(r)),this.reset(),r},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},h.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(e,t){var r,n,a,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(i(this._hash,e),s=0;s<16;s+=1)e[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(r[2],16),a=parseInt(r[1],16)||0,e[14]=n,e[15]=a,i(this._hash,e)},h.hash=function(e,t){return h.hashBinary(f(e),t)},h.hashBinary=function(e,t){var r=u(o(e));return t?c(r):r},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(e){var t,r,n,a,o,l=(r=this._buff.buffer,n=e,a=!0,(o=new Uint8Array(r.byteLength+n.byteLength)).set(new Uint8Array(r)),o.set(new Uint8Array(n),r.byteLength),a?o:o.buffer),u=l.length;for(this._length+=e.byteLength,t=64;t<=u;t+=64)i(this._hash,s(l.subarray(t-64,t)));return this._buff=t-64<u?new Uint8Array(l.buffer.slice(t-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,i=n.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=n[t]<<(t%4<<3);return this._finish(a,i),r=u(this._hash),e&&(r=c(r)),this.reset(),r},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var e,t=h.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},h.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var r,n=e.length,i=new ArrayBuffer(n),a=new Uint8Array(i);for(r=0;r<n;r+=1)a[r]=e.charCodeAt(r);return t?a:i}(e.buff,!0),h.prototype.setState.call(this,e)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(e,t){var r=u(function(e){var t,r,n,a,o,l,u=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)i(f,s(e.subarray(t-64,t)));for(r=(e=t-64<u?e.subarray(t-64):new Uint8Array(0)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)n[t>>2]|=e[t]<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(i(f,n),t=0;t<16;t+=1)n[t]=0;return a=(a=8*u).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(a[2],16),l=parseInt(a[1],16)||0,n[14]=o,n[15]=l,i(f,n),f}(new Uint8Array(e)));return t?c(r):r},t.default=function(e){var t,r=e.file,n=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,i=8097152,a=Math.ceil(r.size/i),s=0,o=new h.ArrayBuffer,l=new FileReader;function u(){var e=s*i,t=e+i>=r.size?r.size:e+i;l.readAsArrayBuffer(n.call(r,e,t))}l.onload=function(n){o.append(n.target.result),s++;var i=Math.floor(s/a*100);e.progress&&e.progress({fileName:r.name,progress:i}),s<a?u():(t=o.end(),e.success&&e.success({md5:t,msg:"success"}),e.complete&&e.complete({result:!0}))},l.onerror=function(){e.error&&e.error({md5:"",msg:"error"}),e.complete&&e.complete({result:!1})},u()}}])});
//# sourceMappingURL=simple-upload-slice-file.min.js.map